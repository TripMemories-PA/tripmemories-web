<div class="flex flex-col items-center mt-10">
    <input
        type="text"
        pInputText
        class="w-3/5"
        [(ngModel)]="search"
        (input)="debouncedSearch()"
        placeholder="Rechercher par nom, ville"
    />
    <p-table
        [value]="pois"
        [paginator]="true"
        class="w-4/5 mt-10"
        [rowsPerPageOptions]="[10, 20, 30]"
        [rows]="itemsPerPage"
        [totalRecords]="totalPages"
        [lazy]="true"
        (onPage)="onPageChange($event)"
        [loading]="loading"
    >
        <ng-template pTemplate="header">
            <tr>
                <th>Id</th>
                <th>Nom</th>
                <th>Adresse</th>
                <th>Image</th>
                <th>Description</th>
                <th>Modifier</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-poi>
            <tr>
                <td>{{ poi.id }}</td>
                <td>{{ poi.name }}</td>
                <td>
                    {{
                        (poi.address ? poi.address + ', ' : ' ') +
                            poi.city.name +
                            ' (' +
                            poi.city.zipCode +
                            ')'
                    }}
                </td>
                <td>
                    <p-button
                        icon="pi pi-eye"
                        [rounded]="true"
                        (onClick)="openImageDialog(poi.cover.url)"
                    />
                </td>
                <td class="text-center">
                    <p-button
                        icon="pi pi-eye"
                        [rounded]="true"
                        (onClick)="openDescriptionDialog(poi.description)"
                    />
                </td>
                <td class="text-center">
                    <p-button icon="pi pi-pencil" [rounded]="true" [disabled]="true" />
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>

<p-dialog [(visible)]="dialogImage" *ngIf="dialogImage" [modal]="true">
    <p-image [src]="selectedImage" alt="Image" width="500" />
</p-dialog>

<p-dialog
    [modal]="true"
    [(visible)]="dialogDescription"
    *ngIf="dialogDescription"
    [style]="{ width: '40rem' }"
>
    <span>{{ selectedDescription }}</span>
</p-dialog>
